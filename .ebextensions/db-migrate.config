container_commands:
  01_migrate_and_collectstatic:
    test: "[ -f /var/app/current/manage.py ]"
    command: 
      - "source /var/app/venv/*/bin/activate"
      - "export $(/opt/elasticbeanstalk/bin/get-config --output YAML environment |  sed -r 's/: /=/' | xargs)"
      - "python manage.py migrate"
      - "python manage.py collectstatic"
    leader_only: true
    ignoreErrors: true
option_settings:
  aws:elasticbeanstalk:application:environment:
    DJANGO_SETTINGS_MODULE: museum_of_dreams_project.settings
